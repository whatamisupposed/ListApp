<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <style>
body {
    background-color: rgb(15, 15, 15); /* gray so black stuff stands out */
    color: gold; 
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh; 
}

.container {
    border: 2px solid gold; /* I like borders */
    padding: 20px;
    background-color: black; 
    text-align: center; 
}

input[type="password"] {
    color: gold; /* the input matches the rest of the style of the page. */
    border: none; 
    background-color: black; 
    border-bottom: 2px solid gold; 
    padding: 10px;
    margin-bottom: 20px;
    outline: none; 
    width: 70%; 
}

input[type="password"]:focus {
    border-bottom: 2px solid goldenrod; 
}

.btn,
button {
    color: gold; 
    border: 1px solid gold; 
    background-color: black;
    padding: 10px 20px; 
    cursor: pointer; 
}

.btn:hover,
button:hover {
    color: black; /* Black stands out better then the gold on goldenrod */
    background-color: goldenrod; 
    border-color: goldenrod; 
}

.profile-info {
    color: gold; 
    margin-top: 10px; 
}
</style>
</head>
<body>
    <div class="container">
        <h1>Login</h1> 
        <div id="passwordContainer">
            <input type="password" id="passwordInput" placeholder="Enter password...">
            <button onclick="enterPassword()" style="margin-right: 10px;">Enter Password</button>
            <button onclick="setPassword()">Set Password</button>
        </div>
        <div id="profileName" class="profile-info"></div>
    </div>
    
    <script> // password stuff
        document.addEventListener('DOMContentLoaded', function() {
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const profile = urlParams.get('profile');
            if (profile) {
                const profileNameElement = document.getElementById('profileName');
                profileNameElement.textContent = `Logging in as: ${decodeURIComponent(profile)}`;
            }
        });

        function enterPassword() {
            const passwordInput = document.getElementById('passwordInput').value;
            const profile = document.location.search.replace(/^.*?\=/,'');

            const profiles = JSON.parse(localStorage.getItem('userProfiles'));
            const profileObj = profiles.find(prof => prof.name === profile);
            
            if (profileObj.password === passwordInput) {
                window.location.href = 'index.html';
            } else {
                alert('Incorrect password.');
            }
        }

        function setPassword() {
            const passwordInput = document.getElementById('passwordInput').value;
            const profile = document.location.search.replace(/^.*?\=/,'');

            const profiles = JSON.parse(localStorage.getItem('userProfiles'));
            const profileObj = profiles.find(prof => prof.name === profile);

            profileObj.password = passwordInput;
            localStorage.setItem('userProfiles', JSON.stringify(profiles));
        }
    </script>
</body>
</html>
